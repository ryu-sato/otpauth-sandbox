# 実装タスク一覧

## 1. TOTPセットアップ機能
- [x] 1.1 TOTPシークレット生成・QRコード表示 (P)
  - ユーザーがセットアップ画面を開いた際にTOTPシークレットを生成し、QRコードを表示する
  - _Requirements: 1.1_
  - [x] 1.2 TOTPシークレットの安全な保存 (P)
  - セットアップ完了時にシークレットをDBへ安全に保存する
  - _Requirements: 1.2_
  - [x] 1.3 セットアップエラー処理 (P)
  - セットアップ中のエラー発生時に適切なメッセージを表示する
  - _Requirements: 1.3_

## 2. TOTP認証フロー
  - [x] 2.1 TOTPコード入力画面の表示 (P)
  - ログイン認証成功後にTOTPコード入力画面を表示する
  - _Requirements: 2.1_
  - [x] 2.2 TOTPコード検証・セッション開始 (P)
  - 有効なTOTPコード入力時にログイン完了・セッション開始
  - _Requirements: 2.2_
  - [x] 2.3 無効なTOTPコードのエラー表示 (P)
  - 無効なコード入力時にエラーメッセージを表示し再入力を促す
  - _Requirements: 2.3_
 - [x] 2.4 認証失敗時のロック・追加対策 (P)
  - 複数回失敗時にアカウントロック等の対策を実施
  - _Requirements: 2.4_

## 3. バックアップ・リカバリ
 - [x] 3.1 バックアップコード生成・表示 (P)
  - セットアップ完了時にバックアップコードを生成し表示する
  - _Requirements: 3.1_
 - [x] 3.2 本人確認・再設定フロー (P)
  - リカバリ申請時に本人確認・再設定手順を案内
  - _Requirements: 3.2_
 - [x] 3.3 リカバリ失敗時の拒否・エラー表示 (P)
  - 本人確認失敗時にリカバリ拒否・エラー表示
  - _Requirements: 3.3_

## 4. 管理・監査
- [ ] 4.1 TOTP統計情報取得 (P)
  - 有効ユーザー数・認証失敗回数等の統計情報取得
  - _Requirements: 4.1_
- [ ] 4.2 TOTP関連イベント監査ログ表示 (P)
  - 管理者が監査ログを要求した際にイベントログを表示
  - _Requirements: 4.2_

## 5. テスト・統合
- [ ] 5.1 TOTPセットアップ・認証・リカバリ・監査の統合テスト (P)
  - 全フローの統合テストを実施し、要件を満たすことを確認
  - _Requirements: 1.1,1.2,1.3,2.1,2.2,2.3,2.4,3.1,3.2,3.3,4.1,4.2_
